RewriteEngine On

# Przekierowanie do panelu admin - POPRAWIONE
# Zamiast przekierowywać, pozwól na bezpośredni dostęp
RewriteCond %{REQUEST_URI} ^/admin
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^admin/(.*)$ admin/$1 [L]

# Istniejące reguły dla profili (tylko jeśli nie jest to admin)
RewriteCond %{REQUEST_URI} !^/admin
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/([^/]+)/?$ profile.php?hash1=$1&hash2=$2 [QSA,L]

# Bezpieczeństwo
<Files "*.php">
    Order Deny,Allow
    Allow from all
</Files>

<FilesMatch "\.(tpl|conf)$">
    Order Deny,Allow
    Deny from all
</FilesMatch>

# Blokuj dostęp do katalogu nadrzędnego
<Files "../*">
    Order Deny,Allow
    Deny from all
</Files>